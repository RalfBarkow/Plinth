##
## DMX configuration snippet for Apache2
##


# See "Running DMX behind an Apache Reverse Proxy" 
#   @ https://dmx.readthedocs.io/en/latest/admin.html#running-dmx-behind-an-apache-reverse-proxy

# See "Configuring Apache mod_proxy with Jetty" 
#   @ https://wiki.eclipse.org/Jetty/Howto/Configure_mod_proxy
# ->  Configure Jetty with a normal HTTP connector, on port 8080 or similar.


# //FIXME Serve DMX from a path prefix
# See https://forum.dmx.systems/t/serve-dmx-from-a-path-prefix/68 
# and https://git.dmx.systems/dmx-platform/dmx-platform/issues/334

# Until the above functionality is available ("Serve DMX from a path prefix")
# as a workaround under the condition that in the DMX settings file HTTPS is disabled (org.apache.felix.https.enable = false) 
# we use port 8443 (org.osgi.service.http.port.secure) as DMX HTTP Proxy.  

Listen 8443

<VirtualHost *:8443> 
    <Location />

        # Configure reverse proxy paths with the URL of the Jetty server
        # org.osgi.service.http.port

        ProxyPass http://localhost:8080/

    </Location>
</VirtualHost>
